<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dasbor Proyek Sepeda Filter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Professional Slate with Blue/Green accents -->
    <!-- Application Structure Plan: A two-column layout with a fixed sidebar for navigation and a main content area for displaying different views ("Analisis Sistem", "Analisis Biaya"). This app-like structure improves organization and user experience. The content is logically separated into functional views, making it easier to digest complex information. -->
    <!-- Visualization & Content Choices: 1. Layout is revamped for a modern feel. 2. AI Assistant is removed. 3. A new "Cost & Capability Analysis" section is added, featuring a comparison table with calculated metrics like "Output per Hour of Pedaling" and "Cost per Liter" to provide clear ROI insights. 4. A placeholder for the system diagram is included. 5. All existing interactive simulators are preserved and integrated into the new layout. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* slate-100 */
        }
        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            color: #475569; /* slate-600 */
            transition: background-color 0.2s, color 0.2s;
        }
        .sidebar-link:hover {
            background-color: #e2e8f0; /* slate-200 */
            color: #0f172a; /* slate-900 */
        }
        .sidebar-link.active {
            background-color: #2563eb; /* blue-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .metric-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid #e2e8f0;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        .section-header {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="text-slate-900">

    <div class="flex h-screen bg-slate-100">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-white p-6 border-r border-slate-200 flex-shrink-0 hidden lg:flex flex-col">
            <h1 class="text-2xl font-extrabold text-blue-700 mb-10">Proyek Sepeda Filter</h1>
            <nav class="space-y-2">
                <a href="#" id="nav-sistem" class="sidebar-link active">
                    <span class="mr-3">ðŸ“Š</span> Analisis Sistem
                </a>
                <a href="#" id="nav-biaya" class="sidebar-link">
                    <span class="mr-3">ðŸ’°</span> Analisis Biaya & Kapabilitas
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <div class="container mx-auto p-6 md:p-10">

                <!-- View 1: Analisis Sistem -->
                <div id="view-sistem">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl md:text-5xl font-extrabold">Analisis Performa Sistem</h2>
                        <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">Perbandingan evolusi sistem dari prototipe awal hingga versi yang ditingkatkan secara efisien.</p>
                    </div>

                    <div class="space-y-12">
                        <!-- Initial System Section -->
                        <section id="problem">
                            <h3 class="text-2xl font-bold mb-6"><span class="section-header">Tantangan Sistem Awal</span></h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center mb-6">
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500">Daya Masuk</h4>
                                    <p class="text-3xl font-bold text-green-600 mt-2">3.42 W</p>
                                </div>
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500">Daya Keluar</h4>
                                    <p class="text-3xl font-bold text-red-600 mt-2">50 W</p>
                                </div>
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500">Defisit Daya</h4>
                                    <p class="text-3xl font-bold text-orange-600 mt-2">46.58 W</p>
                                </div>
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500 flex items-center justify-center">Efisiensi Charging <div class="tooltip ml-2">â“˜<span class="tooltiptext">Rasio perbandingan antara Daya Masuk dan Daya Keluar. Nilai >100% menandakan surplus energi.</span></div></h4>
                                    <p class="text-3xl font-bold text-blue-600 mt-2">6.8 %</p>
                                </div>
                            </div>
                        </section>

                        <!-- Upgraded System Section -->
                        <section id="solution">
                            <h3 class="text-2xl font-bold mb-6"><span class="section-header">Solusi Sistem Ditingkatkan</span></h3>
                             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center mb-6">
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500">Daya Masuk Baru</h4>
                                    <p class="text-3xl font-bold text-green-600 mt-2">68.6 W</p>
                                </div>
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500">Daya Keluar</h4>
                                    <p class="text-3xl font-bold text-red-600 mt-2">50 W</p>
                                </div>
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500">Surplus Daya</h4>
                                    <p class="text-3xl font-bold text-green-600 mt-2">18.6 W</p>
                                </div>
                                <div class="metric-card">
                                    <h4 class="font-semibold text-slate-500 flex items-center justify-center">Efisiensi Charging Baru <div class="tooltip ml-2">â“˜<span class="tooltiptext">Rasio perbandingan antara Daya Masuk dan Daya Keluar. Nilai >100% menandakan surplus energi.</span></div></h4>
                                    <p class="text-3xl font-bold text-blue-600 mt-2">137 %</p>
                                </div>
                            </div>
                            <div class="metric-card">
                                <h4 class="text-xl font-bold text-center mb-4">Peningkatan Drastis Waktu Charging</h4>
                                <div class="chart-container h-72 sm:h-80 max-w-2xl">
                                    <canvas id="chargingImprovementChart"></canvas>
                                </div>
                            </div>
                        </section>

                        <!-- Simulators Section -->
                        <section id="interactive-simulators">
                            <h3 class="text-2xl font-bold mb-6"><span class="section-header">Kalkulator & Simulator Interaktif</span></h3>
                            <div class="metric-card mb-6">
                                <label for="system-selector" class="block text-lg font-bold mb-2 text-center">Pilih Konfigurasi Sistem:</label>
                                <select id="system-selector" class="w-full max-w-md mx-auto block p-3 border border-slate-300 rounded-lg text-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="initial">Sistem Awal</option>
                                    <option value="option1">Opsi 1: PMDC Ditingkatkan</option>
                                    <option value="option2" selected>Opsi 2: BLDC Ditingkatkan</option>
                                </select>
                            </div>
                            <div class="space-y-6">
                                <div class="metric-card">
                                    <h4 class="text-xl font-bold mb-4 text-center">ðŸ”‹âš¡ Simulator Aki & Pengisian Daya</h4>
                                    <p class="text-slate-600 mb-6 text-center">Geser slider untuk melihat bagaimana level aki mempengaruhi waktu operasi dan kebutuhan charging.</p>
                                    
                                    <label for="battery-level-slider" class="block mb-2 font-medium text-slate-700">Level Aki Saat Ini: <span id="battery-level-value" class="font-bold text-blue-600">100%</span></label>
                                    <input type="range" id="battery-level-slider" min="0" max="100" value="100" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                                    
                                    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-center">
                                        <div class="bg-slate-100 p-4 rounded-lg">
                                            <p class="text-sm font-medium text-slate-600">Waktu Operasi Tersisa</p>
                                            <p class="text-3xl font-bold text-slate-800"><span id="runtime-value">...</span></p>
                                        </div>
                                        <div class="bg-slate-100 p-4 rounded-lg">
                                            <p class="text-sm font-medium text-slate-600">Kapasitas Tersedia</p>
                                            <p class="text-3xl font-bold text-slate-800"><span id="capacity-value">...</span> Wh</p>
                                        </div>
                                        <div class="bg-slate-100 p-4 rounded-lg">
                                            <p class="text-sm font-medium text-slate-600">Waktu Charge ke 100%</p>
                                            <p class="text-3xl font-bold text-slate-800"><span id="charge-to-full-value">...</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <h4 class="text-xl font-bold mb-4 text-center">ðŸš² Kalkulator Energi Kayuhan</h4>
                                    <div class="max-w-md mx-auto">
                                        <label for="pedaling-time-input" class="block mb-2 font-medium text-slate-700">Lama Mengayuh (Menit)</label>
                                        <input type="number" id="pedaling-time-input" value="10" min="1" class="w-full p-2 border border-slate-300 rounded-lg">
                                    </div>
                                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                            <h5 class="font-bold text-red-800">Sistem Awal</h5>
                                            <p class="text-2xl font-bold text-red-900 mt-2"><span id="pedal-initial-runtime">...</span></p>
                                            <p class="text-sm text-red-700">Waktu Operasi</p>
                                        </div>
                                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                            <h5 class="font-bold text-yellow-800">Opsi 1 (PMDC)</h5>
                                            <p class="text-2xl font-bold text-yellow-900 mt-2"><span id="pedal-option1-runtime">...</span></p>
                                            <p class="text-sm text-yellow-700">Waktu Operasi</p>
                                        </div>
                                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                            <h5 class="font-bold text-green-800">Opsi 2 (BLDC)</h5>
                                            <p class="text-2xl font-bold text-green-900 mt-2"><span id="pedal-option2-runtime">...</span></p>
                                            <p class="text-sm text-green-700">Waktu Operasi</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <h4 class="text-xl font-bold mb-4 text-center">ðŸ’§ Kalkulator Keperluan Air</h4>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        <div>
                                            <label for="uf-water-input" class="block mb-1 font-medium text-slate-700">Air Bersih (UF) (Liter)</label>
                                            <input type="number" id="uf-water-input" value="70" min="0" class="w-full p-2 border border-slate-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label for="ro-water-input" class="block mb-1 font-medium text-slate-700">Air Minum (RO) (Liter)</label>
                                            <input type="number" id="ro-water-input" value="2" min="0" class="w-full p-2 border border-slate-300 rounded-lg">
                                        </div>
                                    </div>
                                    <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4 text-center">
                                        <div class="bg-slate-100 p-3 rounded-lg">
                                            <p class="text-sm font-medium text-slate-600">Total Waktu Produksi</p>
                                            <p class="text-2xl font-bold text-slate-800"><span id="water-prod-time">...</span></p>
                                        </div>
                                        <div class="bg-slate-100 p-3 rounded-lg">
                                            <p class="text-sm font-medium text-slate-600">Daya Aki Digunakan</p>
                                            <p class="text-2xl font-bold text-slate-800"><span id="water-battery-usage">...</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <!-- View 2: Analisis Biaya -->
                <div id="view-biaya" style="display: none;">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl md:text-5xl font-extrabold">Analisis Biaya & Kapabilitas</h2>
                        <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">Perbandingan investasi awal terhadap output dan efisiensi jangka panjang dari setiap versi sistem.</p>
                    </div>
                    <div class="space-y-8">
                        <div class="metric-card">
                             <h3 class="text-xl font-bold text-center mb-6">Diagram Sistem Ditingkatkan</h3>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                 <div>
                                     <h4 class="font-bold text-lg text-center mb-2">Opsi 1: PMDC</h4>
                                     <img src="https://i.imgur.com/DmtZbZA.png" alt="Diagram alir sistem sepeda filter Opsi 1 PMDC" class="mx-auto rounded-lg border border-slate-200">
                                 </div>
                                 <div>
                                     <h4 class="font-bold text-lg text-center mb-2">Opsi 2: BLDC</h4>
                                     <img src="https://i.imgur.com/u6kDAX0.png" alt="Diagram alir sistem sepeda filter Opsi 2 BLDC" class="mx-auto rounded-lg border border-slate-200">
                                 </div>
                             </div>
                        </div>
                        <div class="metric-card">
                            <h3 class="text-xl font-bold text-center mb-6">Tabel Perbandingan Biaya & Output</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left">
                                    <thead class="bg-slate-100">
                                        <tr>
                                            <th class="p-3 font-semibold">Metrik</th>
                                            <th class="p-3 font-semibold text-center">Sistem Awal</th>
                                            <th class="p-3 font-semibold text-center">Opsi 1 (PMDC)</th>
                                            <th class="p-3 font-semibold text-center">Opsi 2 (BLDC)</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-200">
                                        <tr>
                                            <td class="p-3 font-medium">Estimasi Biaya (Rp)</td>
                                            <td class="p-3 text-center">1.500.000</td>
                                            <td class="p-3 text-center">3.500.000</td>
                                            <td class="p-3 text-center font-bold">3.000.000</td>
                                        </tr>
                                        <tr>
                                            <td class="p-3 font-medium">Daya & Air per Jam Kayuh</td>
                                            <td class="p-3 text-center">3.4 Wh | 27 Liter</td>
                                            <td class="p-3 text-center font-bold">68.6 Wh | 552 Liter</td>
                                            <td class="p-3 text-center font-bold">68.6 Wh | 552 Liter</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <p class="text-sm text-slate-500 mt-4">* Biaya adalah estimasi untuk perbandingan. Output air dihitung berdasarkan produksi air bersih (UF).</p>
                        </div>
                         <div class="metric-card bg-blue-50 border-blue-200">
                            <h3 class="text-xl font-bold text-center mb-4 text-blue-900">Kesimpulan Analisis Biaya</h3>
                            <p class="text-center text-blue-800">Meskipun investasi awal untuk sistem yang ditingkatkan lebih tinggi, kapabilitas produksi air per jam mengayuh **meningkat lebih dari 20 kali lipat**. Opsi 2 (BLDC) menawarkan nilai terbaik, memberikan kapabilitas output tertinggi dengan biaya yang lebih rendah dibandingkan Opsi 1, menjadikannya investasi yang paling efisien dan berkelanjutan.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- System Data ---
            const systems = {
                initial: {
                    name: 'Sistem Awal',
                    powerIn: 3.42,
                    powerOut: 50,
                    batteryWh: 240,
                    waterUF_LPM: 6.7,
                    waterRO_LPM: 0.4,
                },
                option1: {
                    name: 'Opsi 1: PMDC Ditingkatkan',
                    powerIn: 68.6,
                    powerOut: 50,
                    batteryWh: 240,
                    waterUF_LPM: 6.7,
                    waterRO_LPM: 0.4,
                },
                option2: {
                    name: 'Opsi 2: BLDC Ditingkatkan',
                    powerIn: 68.6,
                    powerOut: 50,
                    batteryWh: 240,
                    waterUF_LPM: 6.7,
                    waterRO_LPM: 0.4,
                }
            };

            // --- Chart: Charging Improvement ---
            const improvementCtx = document.getElementById('chargingImprovementChart').getContext('2d');
            const initialChargeRatio = systems.initial.powerOut / systems.initial.powerIn;
            const upgradedChargeRatio = systems.option2.powerOut / systems.option2.powerIn;
            new Chart(improvementCtx, {
                type: 'bar',
                data: {
                    labels: ['Waktu Charging untuk 1 Jam Pakai'],
                    datasets: [
                        {
                            label: 'Sistem Awal',
                            data: [initialChargeRatio],
                            backgroundColor: '#f87171',
                            borderColor: '#ef4444',
                            borderWidth: 2,
                            borderRadius: 5,
                        },
                        {
                            label: 'Sistem Ditingkatkan',
                            data: [upgradedChargeRatio],
                            backgroundColor: '#4ade80',
                            borderColor: '#22c55e',
                            borderWidth: 2,
                            borderRadius: 5,
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Waktu (Jam)' } } },
                    plugins: { tooltip: { callbacks: { label: (context) => `${context.dataset.label}: ${formatTime(context.parsed.y)}` } } }
                }
            });

            // --- Navigation Logic ---
            const navSistem = document.getElementById('nav-sistem');
            const navBiaya = document.getElementById('nav-biaya');
            const viewSistem = document.getElementById('view-sistem');
            const viewBiaya = document.getElementById('view-biaya');

            navSistem.addEventListener('click', (e) => {
                e.preventDefault();
                viewSistem.style.display = 'block';
                viewBiaya.style.display = 'none';
                navSistem.classList.add('active');
                navBiaya.classList.remove('active');
            });

            navBiaya.addEventListener('click', (e) => {
                e.preventDefault();
                viewSistem.style.display = 'none';
                viewBiaya.style.display = 'block';
                navSistem.classList.remove('active');
                navBiaya.classList.add('active');
            });

            // --- Interactive Simulators Logic ---
            const systemSelector = document.getElementById('system-selector');
            const batterySlider = document.getElementById('battery-level-slider');
            const batteryLevelValue = document.getElementById('battery-level-value');
            const runtimeValueEl = document.getElementById('runtime-value');
            const capacityValueEl = document.getElementById('capacity-value');
            const chargeToFullValueEl = document.getElementById('charge-to-full-value');
            const pedalingTimeInput = document.getElementById('pedaling-time-input');
            const pedalInitialRuntimeEl = document.getElementById('pedal-initial-runtime');
            const pedalOption1RuntimeEl = document.getElementById('pedal-option1-runtime');
            const pedalOption2RuntimeEl = document.getElementById('pedal-option2-runtime');
            const ufWaterInput = document.getElementById('uf-water-input');
            const roWaterInput = document.getElementById('ro-water-input');
            const waterProdTimeEl = document.getElementById('water-prod-time');
            const waterBatteryUsageEl = document.getElementById('water-battery-usage');

            function formatTime(hours) {
                if (isNaN(hours) || hours <= 0) return '0 menit';
                if (hours < 1) return `${Math.round(hours * 60)} menit`;
                const h = Math.floor(hours);
                const m = Math.round((hours - h) * 60);
                if (m === 60) return `${h + 1} jam`;
                return `${h} jam ${m} mnt`;
            }

            function updateAllSimulators() {
                const selectedSystemKey = systemSelector.value;
                const system = systems[selectedSystemKey];
                const batteryLevel = batterySlider.value;

                // Update Battery & Runtime Simulator
                batteryLevelValue.textContent = `${batteryLevel}%`;
                const availableWh = system.batteryWh * (batteryLevel / 100);
                capacityValueEl.textContent = availableWh.toFixed(1);
                const runtimeHours = availableWh / system.powerOut;
                runtimeValueEl.textContent = formatTime(runtimeHours);
                
                const neededWh = system.batteryWh - availableWh;
                const chargeToFullHours = neededWh / system.powerIn;
                chargeToFullValueEl.textContent = formatTime(chargeToFullHours);

                // Update Pedaling Calculator
                const pedalingMinutes = parseFloat(pedalingTimeInput.value) || 0;
                Object.keys(systems).forEach(key => {
                    const currentSys = systems[key];
                    const energyGeneratedWh = (pedalingMinutes / 60) * currentSys.powerIn;
                    const runtimeGeneratedHours = energyGeneratedWh / currentSys.powerOut;
                    document.getElementById(`pedal-${key}-runtime`).textContent = formatTime(runtimeGeneratedHours);
                });

                // Update Water Needs Calculator
                const ufLiters = parseFloat(ufWaterInput.value) || 0;
                const roLiters = parseFloat(roWaterInput.value) || 0;
                const timeForUf = system.waterUF_LPM > 0 ? ufLiters / system.waterUF_LPM : 0;
                const timeForRo = system.waterRO_LPM > 0 ? roLiters / system.waterRO_LPM : 0;
                const totalTimeMinutes = timeForUf + timeForRo;
                waterProdTimeEl.textContent = formatTime(totalTimeMinutes / 60);
                const totalTimeHours = totalTimeMinutes / 60;
                const energyConsumedWh = system.powerOut * totalTimeHours;
                const batteryPercentUsed = (energyConsumedWh / system.batteryWh) * 100;
                waterBatteryUsageEl.textContent = `${batteryPercentUsed.toFixed(1)} %`;
            }

            systemSelector.addEventListener('change', updateAllSimulators);
            batterySlider.addEventListener('input', updateAllSimulators);
            pedalingTimeInput.addEventListener('input', updateAllSimulators);
            ufWaterInput.addEventListener('input', updateAllSimulators);
            roWaterInput.addEventListener('input', updateAllSimulators);
            
            // Initial calculations
            updateAllSimulators();
        });
    </script>
</body>
</html>
